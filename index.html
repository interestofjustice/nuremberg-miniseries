titleDisplay = document.getElementById('weekSubtitle');
    const dayGridContainer = document.getElementById('dayGrid');
    const weekContentContainer = document.getElementById('weekContent');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const modalClose = document.getElementById('modalClose');
    const modalCloseBtn = document.getElementById('modalCloseBtn');
    const addToCalendarBtn = document.getElementById('addToCalendarBtn');
    const toast = document.getElementById('toast');
    const resourceButtons = document.querySelectorAll('.resource-btn');

    // Initialize UI
    function init() {
      renderWeekContent(currentWeek);
      updateNavigationControls();
      setupEventListeners();
    }

    // Get day class
    function getDayClass(day) {
      switch(day) {
        case 'Monday': return 'monday';
        case 'Tuesday': return 'tuesday';
        case 'Wednesday': return 'wednesday';
        case 'Thursday': return 'thursday';
        case 'Friday': return 'friday';
        default: return 'monday';
      }
    }

    // Get day emoji
    function getDayEmoji(day) {
      switch(day) {
        case 'Monday': return '🔍';
        case 'Tuesday': return '⚖️';
        case 'Wednesday': return '🔬';
        case 'Thursday': return '🌐';
        case 'Friday': return '🚀';
        default: return '📅';
      }
    }

    // Render week content with animation
    function renderWeekContent(weekNumber) {
      const weekData = seriesData.find(week => week.week === weekNumber);
      if (!weekData) return;

      weekContentContainer.classList.add('fade-out');
      
      setTimeout(() => {
        // Update header content
        weekTitleDisplay.textContent = `Week ${weekData.week}: ${weekData.title}`;
        weekSubtitleDisplay.textContent = weekData.subtitle;
        currentDateDisplay.textContent = weekData.date;
        
        // Clear existing day cards
        dayGridContainer.innerHTML = '';
        
        // Create day cards with staggered animation
        weekData.episodes.forEach((episode, index) => {
          const dayCard = document.createElement('div');
          dayCard.className = 'day-card';
          dayCard.style.animationDelay = `${index * 0.05}s`;
          dayCard.classList.add('fade-in-up');
          
          dayCard.innerHTML = `
            <div class="icon-circle ${getDayClass(episode.day)}">
              ${getDayEmoji(episode.day)}
            </div>
            <span class="day-name">${episode.day}</span>
            <div class="day-title">${episode.title}</div>
          `;
          
          dayCard.addEventListener('click', () => {
            currentEpisodeInfo = {
              day: episode.day,
              title: episode.title,
              weekDate: weekData.date
            };
            openEpisodeModal(episode, weekData.date);
          });
          
          dayGridContainer.appendChild(dayCard);
        });
        
        // Update active state of week buttons
        weekButtons.forEach(button => {
          button.classList.toggle('active', parseInt(button.dataset.week) === weekNumber);
        });
        
        // Show content with animation
        weekContentContainer.classList.remove('fade-out');
      }, 150);
    }

    // Update navigation controls (enable/disable prev/next buttons)
    function updateNavigationControls() {
      prevWeekBtn.disabled = currentWeek <= 1;
      nextWeekBtn.disabled = currentWeek >= seriesData.length;
    }

    // Open episode modal
    function openEpisodeModal(episode, weekDate) {
      const dayClass = getDayClass(episode.day);
      
      modalTitle.textContent = `${episode.day}: ${episode.title}`;
      
      modalBody.innerHTML = `
        <div class="modal-day-badge ${dayClass}">
          ${episode.day}, ${weekDate.split('-')[0]}
        </div>
        <p class="modal-description">${episode.description}</p>
        <h4 class="modal-points-title">Key Points:</h4>
        <ul class="modal-points-list">
          ${episode.points.map(point => `<li>${point}</li>`).join('')}
        </ul>
      `;
      
      modalBackdrop.classList.add('active');
      
      // Prevent body scrolling when modal is open
      document.body.style.overflow = 'hidden';
    }

    // Open resource modal
    function openResourceModal(resourceKey) {
      const resource = resourceDescriptions[resourceKey];
      if (!resource) return;
      
      modalTitle.textContent = resource.title;
      
      modalBody.innerHTML = `
        <p class="modal-description">${resource.content}</p>
      `;
      
      modalBackdrop.classList.add('active');
      
      // Prevent body scrolling when modal is open
      document.body.style.overflow = 'hidden';
    }

    // Close modal
    function closeModal() {
      modalBackdrop.classList.remove('active');
      
      // Re-enable body scrolling
      document.body.style.overflow = 'auto';
    }

    // Show toast notification
    function showToast(message) {
      toast.textContent = message;
      toast.classList.add('active');
      
      setTimeout(() => {
        toast.classList.remove('active');
      }, 3000);
    }

    // Set up event listeners
    function setupEventListeners() {
      // Overview toggle
      toggleOverviewBtn.addEventListener('click', () => {
        overviewPanel.classList.toggle('active');
        toggleOverviewBtn.querySelector('span').textContent = 
          overviewPanel.classList.contains('active') ? 'Hide Overview' : 'Show Overview';
      });
      
      // Week navigation
      prevWeekBtn.addEventListener('click', () => {
        if (currentWeek > 1) {
          currentWeek--;
          renderWeekContent(currentWeek);
          updateNavigationControls();
        }
      });
      
      nextWeekBtn.addEventListener('click', () => {
        if (currentWeek < seriesData.length) {
          currentWeek++;
          renderWeekContent(currentWeek);
          updateNavigationControls();
        }
      });
      
      // Week buttons
      weekButtons.forEach(button => {
        button.addEventListener('click', () => {
          const weekNum = parseInt(button.dataset.week);
          if (weekNum !== currentWeek) {
            currentWeek = weekNum;
            renderWeekContent(currentWeek);
            updateNavigationControls();
          }
        });
      });
      
      // Modal close buttons
      modalClose.addEventListener('click', closeModal);
      modalCloseBtn.addEventListener('click', closeModal);
      modalBackdrop.addEventListener('click', (e) => {
        if (e.target === modalBackdrop) {
          closeModal();
        }
      });
      
      // Add to calendar button
      addToCalendarBtn.addEventListener('click', () => {
        if (currentEpisodeInfo) {
          const { day, title, weekDate } = currentEpisodeInfo;
          showToast(`Added to calendar: ${day} - ${title}`);
        } else {
          showToast('Event added to calendar');
        }
      });
      
      // Resource buttons
      resourceButtons.forEach(button => {
        button.addEventListener('click', () => {
          const resourceKey = button.dataset.resource;
          openResourceModal(resourceKey);
        });
      });
      
      // Keyboard event to close modal with Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modalBackdrop.classList.contains('active')) {
          closeModal();
        }
      });
    }

    // Initialize the application
    init();
  </script>
</body>
</html>
